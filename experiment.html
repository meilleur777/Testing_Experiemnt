<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Thumb Reach Experiment</title>
  <style>
    /* --- keep your existing CSS here --- */
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Thumb-Adaptive Button UI Experiment</h1>
      <p>ì—„ì§€ ë„ë‹¬ ë²”ìœ„ ê¸°ë°˜ ì ì‘í˜• UI ì‹¤í—˜</p>
    </div>

    <div class="content">
      <!-- keep all your existing screens unchanged -->
      <!-- ... -->

      <!-- Screen 8: Results -->
      <div class="screen" id="screen-results">
        <h2>ì‹¤í—˜ ì™„ë£Œ!</h2>
        <div class="instruction">
          <p>ì‹¤í—˜ì— ì°¸ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
          <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ íŒŒì¼ì„ GitHubì— ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</p>
        </div>

        <div class="result-card">
          <h3>Fixed UI ê²°ê³¼</h3>
          <div class="result-row">
            <span>í‰ê·  ì™„ë£Œ ì‹œê°„</span>
            <span id="result-fixed-time">-</span>
          </div>
          <div class="result-row">
            <span>ì˜¤ë¥˜ìœ¨</span>
            <span id="result-fixed-error">-</span>
          </div>
        </div>

        <div class="result-card">
          <h3>Adaptive UI ê²°ê³¼</h3>
          <div class="result-row">
            <span>í‰ê·  ì™„ë£Œ ì‹œê°„</span>
            <span id="result-adaptive-time">-</span>
          </div>
          <div class="result-row">
            <span>ì˜¤ë¥˜ìœ¨</span>
            <span id="result-adaptive-error">-</span>
          </div>
        </div>

        <button class="btn-primary" id="btn-upload">ê²°ê³¼ íŒŒì¼ ì—…ë¡œë“œ (GitHub)</button>
      </div>
    </div>
  </div>

  <script>
    // --- keep all your existing JS logic here (participantData, experiment flow, etc.) ---

    // Replace downloadResults with GitHub upload
    async function uploadResultsToGitHub() {
      const results = {
        participant: participantData,
        experiments: participantData.experiments
      };

      const fileContent = btoa(JSON.stringify(results, null, 2));
      const filename = `results_${participantData.studentId}_${Date.now()}.json`;

      // ğŸ”§ Replace with your repo info
      const owner = "meilleur777";
      const repo = "Testing_Experiemnt";
      const path = `results/${filename}`;
      const token = "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"; // âš ï¸ visible in source

      const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

      try {
        const response = await fetch(url, {
          method: "PUT",
          headers: {
            "Authorization": `token ${token}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            message: `Upload results file ${filename}`,
            content: fileContent
          })
        });

        const data = await response.json();
        if (response.ok) {
          showAlert("âœ… ê²°ê³¼ê°€ GitHubì— ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!", "success");
          console.log("File URL:", data.content.html_url);
        } else {
          showAlert("âŒ ì—…ë¡œë“œ ì‹¤íŒ¨", "error");
          console.error(data);
        }
      } catch (err) {
        showAlert("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: " + err.message, "error");
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      // keep your other event listeners...
      document.getElementById('btn-upload').addEventListener('click', uploadResultsToGitHub);
    });

    // Alert helper
    function showAlert(message, type) {
      type = type || 'error';
      var alertBox = document.createElement('div');
      alertBox.className = 'alert-box ' + type;
      alertBox.textContent = message;
      document.body.appendChild(alertBox);

      setTimeout(function() {
        alertBox.style.opacity = '0';
        alertBox.style.transition = 'opacity 0.3s';
        setTimeout(function() {
          if (alertBox.parentNode) {
            document.body.removeChild(alertBox);
          }
        }, 300);
      }, 3000);
    }
  </script>
</body>
</html>
